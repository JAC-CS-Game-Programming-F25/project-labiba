classDiagram

    %% -------------------------
    %% Base Entities
    %% -------------------------

    class GameEntity {
        + width: int
        + height: int
        + position: Vector2
        + update()
        + draw()
        + render()
    }

    class Player {
        + hp: int
        + lightPoints: int
        + inventory: List~Item~
        + move()
        + intializeStateMachine()
        + attack()
        + receiveDamage(damage)
        + useItem(item: Item)
        + addToInventory(item: Item)
    }

    class NPC {
        + name: string
        + dialogueLines: List~string~
        + talk()
        + giveItem()
    }

    class Enemy {
        + stats: EnemyStats
        + type: EnemyType
        + attack()
        + intializeStateMachine()
        + takeDamage(amount: int)
    }

    %% -------------------------
    %% Enemy Subclasses (Bosses)
    %% -------------------------
    class Anxiety {
        + specialAttack()
    }

    class Doubt {
        + roarShockwave()
    }

    class Gloom {
        + voidBurst()
    }

    Enemy <|-- Anxiety
    Enemy <|-- Doubt
    Enemy <|-- Gloom

    %% -------------------------
    %% Items Hierarchy
    %% -------------------------

    class GameObject {
        + name: string
        + description: string
        + use(player: Player)
    }

    class HealingItem {
        + healAmount: int
    }

    class BuffItem {
        + duration: int
    }

    class StoryItem {
        + flagID: string
    }

    GameObject <|-- HealingItem
    GameObject <|-- BuffItem
    GameObject <|-- StoryItem

    %% -------------------------
    %% Actual Game Items
    %% -------------------------

    class LuminaFruit {
        + healPercentage: float
    }

    class EchoCharm {
        + defenseBoost: int
    }

    class MirasBandage {
        + regenPerTurn: int
        + duration: int
    }

    class PureLightSeed {
        + damageBoost: int
        + storyFlag: string
    }

    class Stick {
        + baseDamage: int
    }

    class ShardOfDoubt {
        + attackBoost: int
        + selfDamage: int
    }

    class Windleaf {
        + speedBoost: int
        + doubleAttackChance: float
    }
    class SoulFragment {
        + fragmentId: int
        + description: string
    }

    Player --> SoulFragment
    HealingItem <|-- LuminaFruit
    BuffItem <|-- EchoCharm
    BuffItem <|-- MirasBandage
    BuffItem <|-- ShardOfDoubt
    BuffItem <|-- Windleaf
    StoryItem <|-- PureLightSeed
    GameObject <|-- Stick

    %% -------------------------
    %% Collectibles in World
    %% -------------------------
    class Collectible {
        + itemType: ItemType
        + item: Item
        + pickUp(player: Player)
    }

    class CollectibleFactory {
        + createCollectible(itemType: ItemType) Collectible
    }

    GameEntity <|-- Collectible
    CollectibleFactory --> Collectible
    Player --> Collectible

    %% -------------------------
    %% Enemy Factory
    %% -------------------------
    class EnemyFactory {
        + createEnemy(type: EnemyType): Enemy
    }

    EnemyFactory --> Enemy

    %% -------------------------
    %% NPC Subclasses
    %% -------------------------

    class SisterNPC {
        + giveLuminaFruit()
        + reactToPureLightSeed()
    }

    class ElderRowan {
        + giveEchoCharm()
    }

    class ScoutMira {
        + giveBandage()
    }

    class SageElara {
        + giveCompass()
    }

    NPC <|-- SisterNPC
    NPC <|-- ElderRowan
    NPC <|-- ScoutMira
    NPC <|-- SageElara

    %% -------------------------
    %% Save File
    %% -------------------------
    class SaveFile {
        + playerHP: int
        + fragmentsCollected: int
        + playerPosition: Vector2
        + inventory: List~Item~
        + storyFlags: Dictionary
        + save()
        + load()
    }

    SaveFile --> Player
    GameEntity <|-- Player
    GameEntity <|-- Enemy
    GameEntity <| -- NPC


    %% -------------------------
    %% Map  
    %% -------------------------
    class MapZone {
        + id: string
        + enemies: List<Enemy>
        + collectibles: List<Collectible>
        + exits: List<MapZone>
    }

    class MapManager {
        + loadZone(id: string)
        + unloadZone(id: string)
    }